# Лабораторная работа №3 «Работа с таблицами»
## Задачи
### Основные задачи
Необходимо разработать два следующих варианта программы (лабораторные работы 3а и 3б):
1. Сама таблица, и информация, относящаяся к элементам таблицы, хранятся в основной памяти.
2. Сама таблица, и информация, относящаяся к элементам таблицы, хранятся во внешней памяти (используется двоичный файл произвольного доступа). Описатель таблицы и описатели
пространств ключей считывается из файла (или создаются в первый раз) в начале сеанса работы и записывается в файл в конце сеанса работы. Информация, относящаяся к элементам
таблицы, записывается в файл сразу же при выполнении операции включения в таблицу и в
основной памяти не хранится (возможно за исключением элемента, с которым производится
текущая операция). Все операции выполняются с описателем таблицы и пространств ключей,
размещенными в основной памяти. Все структуры данных модифицируются соответствующим образом (замена указателей на смещение в файле и т.п.). Имя файла вводится по запросу
из программы и хранится в описателе таблицы.

### Дополнительные задачи
Существует ряд дополнительных задач, не обязательных к выполнению, но позволяющих получить дополнительные баллы.
За задачу, отмеченную «\*», можно получить до 10% дополнительных баллов (до 1 балла по десятибалльной шкале), за задание, отмеченное «\*\*» — до 20% дополнительных баллов (до 2 баллов
по десятибалльной шкале), а за задание, отмеченное «\*\*\*» — до 30% дополнительных баллов (до 3
баллов по десятибалльной шкале).
Дополнительные задачи:
1. \* Реализация поиска как итератора одним из возможных способов (например, в виде функции,
которая при каждом вызове возвращает очередной из найденных элементов).
2. \*\* Аналогично п. 2, но все операции выполняются с пространствами ключей, размещенными
во внешней памяти, в основной памяти может храниться только описатель таблицы.
3. \*\*\* Аналогично предыдущему заданию, но с реализацией буферизации файловых операций
(можно считывать и записывать по несколько записей) и кеширования записей (тип кэша и
стратегии управления кэшем выбираются по согласованию с преподавателем).

## Вариант №342
Написать программу для работы с таблицей, использующей два пространства ключей, по запросам оператора.
Каждый элемент таблицы имеет следующую структуру:
```
struct Item {
    InfoType *info; // указатель на информацию
    RelType release; // версия элемента 
    Item *next; // указатель на следующий элемент с данным составным ключом

    // опциональные поля, для оптимизации выполнения операций,
    // состав и наличие которых должны быть обоснованы:
    KeyType1 key1; // ключ элемента из 1-го пространства ключей
    KetType2 key2; // ключ элемента из 2-го пространства ключей
    IndexType1 ind1; // связь с элементом 1-го пространства ключей по индексу
    IndexType2 ind2; // связь с элементом 2-го пространства ключей по индексу
    PointerType1 *p1; // связь с элементом 2-го пространства ключей по указателю
    PointerType2 *p2; // связь с элементом 2-го пространства ключей по указателю
};
```

Должны быть предусмотрены следующие операции:
1. включение нового элемента в таблицу с соблюдением ограничений на уникальность ключей в
соответствующих ключевых пространствах (см. предыдущие пункты задания) и уникальность
составного ключа (key1, key2);
2. поиск в таблице элемента, заданного составным ключом;
3. удаление из таблицы элемента, заданного составным ключом;
4. поиск в таблице элемента по любому заданному ключу; результатом поиска должна быть копии
всех найденных элементов со значениями ключей;
5. удаление из таблицы всех элементов, заданного ключом в одном из ключевых пространств;
6. вывод содержимого таблицы на экран (или текстовый файл), при этом формат вывода должен
соответствовать элемента таблицы;
7. особые операции, определяемые в соответствующем пространстве ключей

В таблице могут присутствовать элементы с одинаковым составными ключами (key1, key2)
и разными номерами версий (номер версии элемента формируется как порядковый номер элемента
в последовательности элементов с одинаковыми ключами, определяемый при включении элемента
в таблицу).
Первое пространство ключей организовано как просматриваемая таблица, организованная списком; каждый элемент таблицы имеет следующую структуру:
```
struct KeySpace1 {
    KeyType1 key; // ненулевой ключ элемента
    KeyType1 par; // ключ родительского элемента, может быть нулевым
    Item *info; // указатель на информацию
    KeySpace1 *next; // указатель на следующий элемент
};
```
В пространстве не может быть двух элементов с одинаковыми ключами, а значение ключа родительского элемента для элемента должно совпадать с каким-либо значением ключа элемента, существующего в таблице, либо быть нулевым.
В данном пространстве ключей предусмотрены следующие особые операции:
1. удаление из таблицы элемента, заданного своим ключом; при этом также должны быть удалены
(рекурсивно) все элементы, ссылающиеся на удаляемый;
2. поиск в таблице всех элементов, заданных значением ключа родительского элемента; результатом поиска должна быть новая таблица, содержащая найденные элементы.
Второе пространство ключей организовано как перемешанная таблица, использующая перемешивание сложением. Перемешанная таблица организована вектором; каждый элемент таблицы имеет
следующую структуру:
```
struct KeySpace2 {
    BusyType2 busy; // признак занятости элемента
    KeyType2 key; // ключ элемента
    InfoType *info; // указатель на информацию
};
```
Максимальный размер пространства ключей ограничен величиной *msize2*, значение которой
определяется при инициализации таблицы.
В пространстве не может быть двух элементов с одинаковыми ключами.
В данном пространстве ключей особые операции не предусмотрены.
